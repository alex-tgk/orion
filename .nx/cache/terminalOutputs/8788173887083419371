ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/acarroll/dev/projects/orion/packages/logger/tsconfig.spec.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/acarroll/dev/projects/orion/packages/logger/tsconfig.spec.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/acarroll/dev/projects/orion/packages/logger/tsconfig.spec.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/acarroll/dev/projects/orion/packages/logger/tsconfig.spec.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/acarroll/dev/projects/orion/packages/logger/tsconfig.spec.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
{"timestamp":"2025-10-18T12:03:19.008-04:00","level":"info","service":"sanitize-test","environment":"test","pid":39465,"message":"test","password":"[REDACTED]","username":"user"}
[0m[7m[1m[32m PASS [39m[22m[27m[0m [0m[7m[37m logger [39m[27m[0m [2mpackages/logger/src/lib/formatters/__tests__/[22m[1mformatters.spec.ts[22m
  Formatters
    JSON Formatter
      [32m‚úì[39m [2mshould be defined (25 ms)[22m
      [32m‚úì[39m [2mshould be a Winston format (2 ms)[22m
    Development Formatter
      [32m‚úì[39m [2mshould be defined (2 ms)[22m
      [32m‚úì[39m [2mshould be a Winston format (2 ms)[22m

{"timestamp":"2025-10-18T12:03:19.040-04:00","level":"info","service":"token-sanitize","environment":"test","pid":39465,"message":"test","token":"[REDACTED]"}
{"timestamp":"2025-10-18T12:03:19.044-04:00","level":"info","service":"apikey-sanitize","environment":"test","pid":39465,"message":"test","apiKey":"[REDACTED]"}
{"timestamp":"2025-10-18T12:03:19.054-04:00","level":"info","service":"auth-sanitize","environment":"test","pid":39465,"message":"test","authorization":"[REDACTED]"}
{"timestamp":"2025-10-18T12:03:19.061-04:00","level":"info","service":"access-token-sanitize","environment":"test","pid":39465,"message":"test","accessToken":"[REDACTED]"}
{"timestamp":"2025-10-18T12:03:19.074-04:00","level":"info","service":"refresh-token-sanitize","environment":"test","pid":39465,"message":"test","refreshToken":"[REDACTED]"}
{"timestamp":"2025-10-18T12:03:19.078-04:00","level":"info","service":"secret-sanitize","environment":"test","pid":39465,"message":"test","secret":"[REDACTED]"}
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [0m[7m[37m logger [39m[27m[0m [2mpackages/logger/src/lib/transports/__tests__/[22m[1mtransports.spec.ts[22m
  Transports
    Console Transport
      [32m‚úì[39m [2mshould create console transport (42 ms)[22m
      [32m‚úì[39m [2mshould respect log level (3 ms)[22m
      [32m‚úì[39m [2mshould handle pretty mode (16 ms)[22m
    File Transports
      [32m‚úì[39m [2mshould return empty array without file options (5 ms)[22m
      [32m‚úì[39m [2mshould create file transport with options (64 ms)[22m
      [32m‚úì[39m [2mshould create error file transport when specified (5 ms)[22m
      [31m‚úï[39m [2mshould use default max size and max files (29 ms)[22m
      [31m‚úï[39m [2mshould use custom max size and max files (20 ms)[22m
      [32m‚úì[39m [2mshould set error level for error file (5 ms)[22m

[1m[31m  [1m‚óè [22m[1mTransports ‚Ä∫ File Transports ‚Ä∫ should use default max size and max files[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"20m"[39m
    Received: [31mundefined[39m
[2m[22m
[2m    [0m [90m 72 |[39m       [36mconst[39m transport [33m=[39m transports[[35m0[39m] [36mas[39m any[33m;[39m[22m
[2m     [90m 73 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 74 |[39m       expect(transport[33m.[39mmaxSize)[33m.[39mtoBe([32m'20m'[39m)[33m;[39m[22m
[2m     [90m    |[39m                                 [31m[1m^[22m[2m[39m[22m
[2m     [90m 75 |[39m       expect(transport[33m.[39mmaxFiles)[33m.[39mtoBe([32m'14d'[39m)[33m;[39m[22m
[2m     [90m 76 |[39m     })[33m;[39m[22m
[2m     [90m 77 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/lib/transports/__tests__/transports.spec.ts[39m[0m[2m:74:33)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mTransports ‚Ä∫ File Transports ‚Ä∫ should use custom max size and max files[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"50m"[39m
    Received: [31mundefined[39m
[2m[22m
[2m    [0m [90m 89 |[39m       [36mconst[39m transport [33m=[39m transports[[35m0[39m] [36mas[39m any[33m;[39m[22m
[2m     [90m 90 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 91 |[39m       expect(transport[33m.[39mmaxSize)[33m.[39mtoBe([32m'50m'[39m)[33m;[39m[22m
[2m     [90m    |[39m                                 [31m[1m^[22m[2m[39m[22m
[2m     [90m 92 |[39m       expect(transport[33m.[39mmaxFiles)[33m.[39mtoBe([32m'30d'[39m)[33m;[39m[22m
[2m     [90m 93 |[39m     })[33m;[39m[22m
[2m     [90m 94 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/lib/transports/__tests__/transports.spec.ts[39m[0m[2m:91:33)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [0m[7m[37m logger [39m[27m[0m [2mpackages/logger/src/lib/__tests__/[22m[1mlogger.config.additional.spec.ts[22m
  Logger Config Additional Tests
    Sanitization
      [32m‚úì[39m [2mshould sanitize password field (45 ms)[22m
      [32m‚úì[39m [2mshould use custom sanitization fields (17 ms)[22m
      [32m‚úì[39m [2mshould sanitize token field (4 ms)[22m
      [32m‚úì[39m [2mshould sanitize apiKey field (5 ms)[22m
      [32m‚úì[39m [2mshould sanitize authorization header (8 ms)[22m
      [32m‚úì[39m [2mshould sanitize accessToken field (5 ms)[22m
      [32m‚úì[39m [2mshould sanitize refreshToken field (13 ms)[22m
      [32m‚úì[39m [2mshould sanitize secret field (3 ms)[22m
    Transport Combinations
      [32m‚úì[39m [2mshould handle both console and file transports (72 ms)[22m
      [32m‚úì[39m [2mshould handle only file transport (9 ms)[22m
      [32m‚úì[39m [2mshould ignore file transport without options (2 ms)[22m
    Environment Handling
      [32m‚úì[39m [2mshould use production environment (3 ms)[22m
      [32m‚úì[39m [2mshould use staging environment (11 ms)[22m
      [32m‚úì[39m [2mshould override NODE_ENV with explicit environment (6 ms)[22m
    Pretty Mode Configuration
      [32m‚úì[39m [2mshould configure console for pretty mode (18 ms)[22m
      [32m‚úì[39m [2mshould configure console for JSON mode (1 ms)[22m
    Log Level Configuration
      [32m‚úì[39m [2mshould configure with error level (2 ms)[22m
      [32m‚úì[39m [2mshould configure with http level (1 ms)[22m
    File Options
      [32m‚úì[39m [2mshould create file transport with error file (7 ms)[22m
      [32m‚úì[39m [2mshould create file transport without error file (3 ms)[22m
      [31m‚úï[39m [2mshould use custom file size (22 ms)[22m
      [31m‚úï[39m [2mshould use custom max files retention (3 ms)[22m
    Exit on Error
      [32m‚úì[39m [2mshould always set exitOnError to false (1 ms)[22m
    Default Meta
      [32m‚úì[39m [2mshould include service name in defaultMeta (5 ms)[22m
      [32m‚úì[39m [2mshould include environment in defaultMeta (1 ms)[22m

[1m[31m  [1m‚óè [22m[1mLogger Config Additional Tests ‚Ä∫ File Options ‚Ä∫ should use custom file size[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"100m"[39m
    Received: [31mundefined[39m
[2m[22m
[2m    [0m [90m 311 |[39m       [36mconst[39m loggerConfig [33m=[39m createLoggerConfig(config)[33m;[39m[22m
[2m     [90m 312 |[39m       [36mconst[39m transport [33m=[39m loggerConfig[33m.[39mtransports[33m![39m[[35m0[39m] [36mas[39m any[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 313 |[39m       expect(transport[33m.[39mmaxSize)[33m.[39mtoBe([32m'100m'[39m)[33m;[39m[22m
[2m     [90m     |[39m                                 [31m[1m^[22m[2m[39m[22m
[2m     [90m 314 |[39m     })[33m;[39m[22m
[2m     [90m 315 |[39m[22m
[2m     [90m 316 |[39m     it([32m'should use custom max files retention'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/lib/__tests__/logger.config.additional.spec.ts[39m[0m[2m:313:33)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mLogger Config Additional Tests ‚Ä∫ File Options ‚Ä∫ should use custom max files retention[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"30d"[39m
    Received: [31mundefined[39m
[2m[22m
[2m    [0m [90m 326 |[39m       [36mconst[39m loggerConfig [33m=[39m createLoggerConfig(config)[33m;[39m[22m
[2m     [90m 327 |[39m       [36mconst[39m transport [33m=[39m loggerConfig[33m.[39mtransports[33m![39m[[35m0[39m] [36mas[39m any[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 328 |[39m       expect(transport[33m.[39mmaxFiles)[33m.[39mtoBe([32m'30d'[39m)[33m;[39m[22m
[2m     [90m     |[39m                                  [31m[1m^[22m[2m[39m[22m
[2m     [90m 329 |[39m     })[33m;[39m[22m
[2m     [90m 330 |[39m   })[33m;[39m[22m
[2m     [90m 331 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/lib/__tests__/logger.config.additional.spec.ts[39m[0m[2m:328:34)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [0m[7m[37m logger [39m[27m[0m [2mpackages/logger/src/lib/__tests__/[22m[1mlogger.service.additional.spec.ts[22m
  LoggerService Additional Tests
    Correlation ID Integration
      [32m‚úì[39m [2mshould get AsyncLocalStorage instance (42 ms)[22m
      [32m‚úì[39m [2mshould set correlation ID using static method (15 ms)[22m
      [32m‚úì[39m [2mshould maintain correlation ID across nested calls (5 ms)[22m
      [32m‚úì[39m [2mshould work without correlation ID context (23 ms)[22m
    All Log Levels
      [32m‚úì[39m [2mshould log info messages correctly (13 ms)[22m
      [32m‚úì[39m [2mshould log error messages with stack trace (100 ms)[22m
      [32m‚úì[39m [2mshould log warning messages (3 ms)[22m
      [32m‚úì[39m [2mshould log debug messages (17 ms)[22m
      [32m‚úì[39m [2mshould log verbose messages (3 ms)[22m
      [31m‚úï[39m [2mshould log HTTP messages (16 ms)[22m
    Context Override
      [32m‚úì[39m [2mshould override context in log method (3 ms)[22m
      [32m‚úì[39m [2mshould override context in error method (8 ms)[22m
      [32m‚úì[39m [2mshould override context in warn method (13 ms)[22m
      [32m‚úì[39m [2mshould override context in debug method (2 ms)[22m
      [32m‚úì[39m [2mshould override context in verbose method (13 ms)[22m
    Metadata Handling
      [32m‚úì[39m [2mshould include metadata in logs (10 ms)[22m
      [32m‚úì[39m [2mshould handle empty metadata (2 ms)[22m
      [32m‚úì[39m [2mshould handle undefined metadata (2 ms)[22m
      [32m‚úì[39m [2mshould handle complex nested metadata (1 ms)[22m
      [32m‚úì[39m [2mshould handle arrays in metadata (2 ms)[22m
      [32m‚úì[39m [2mshould handle null values (3 ms)[22m
    Child Logger
      [32m‚úì[39m [2mshould create child logger with context (5 ms)[22m
      [32m‚úì[39m [2mshould create child logger with metadata (2 ms)[22m
      [32m‚úì[39m [2mshould allow child logger to log (20 ms)[22m
      [32m‚úì[39m [2mshould maintain separate contexts (2 ms)[22m
    Error Logging with Stack Traces
      [32m‚úì[39m [2mshould include stack trace in error logs (3 ms)[22m
      [32m‚úì[39m [2mshould handle errors without stack traces (2 ms)[22m
      [32m‚úì[39m [2mshould include metadata with error (20 ms)[22m
    Context Management
      [32m‚úì[39m [2mshould update context (10 ms)[22m
      [32m‚úì[39m [2mshould preserve context across multiple logs (2 ms)[22m
      [32m‚úì[39m [2mshould allow context reset (2 ms)[22m
    Winston Logger Access
      [32m‚úì[39m [2mshould provide access to Winston logger (26 ms)[22m
      [32m‚úì[39m [2mshould return the same logger instance (2 ms)[22m
    Correlation ID with Metadata
      [32m‚úì[39m [2mshould include both correlation ID and metadata (1 ms)[22m
      [32m‚úì[39m [2mshould handle correlation ID in error logs (5 ms)[22m
    Edge Cases
      [32m‚úì[39m [2mshould handle empty string messages (2 ms)[22m
      [32m‚úì[39m [2mshould handle very long messages (14 ms)[22m
      [32m‚úì[39m [2mshould handle special characters in messages (2 ms)[22m
      [32m‚úì[39m [2mshould handle Unicode characters (1 ms)[22m
      [32m‚úì[39m [2mshould handle rapid successive logs (3 ms)[22m
    All Log Levels with Context Override
      [32m‚úì[39m [2mshould use context override for all levels (24 ms)[22m

[1m[31m  [1m‚óè [22m[1mLoggerService Additional Tests ‚Ä∫ All Log Levels ‚Ä∫ should log HTTP messages[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31mundefined[39m
[2m[22m
[2m    [0m [90m 147 |[39m       expect(logs[[35m0[39m][33m.[39mlevel)[33m.[39mtoBe([32m'http'[39m)[33m;[39m[22m
[2m     [90m 148 |[39m       expect(logs[[35m0[39m][33m.[39mmessage)[33m.[39mtoBe([32m'GET /api/users'[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 149 |[39m       expect(logs[[35m0[39m][33m.[39mstatusCode)[33m.[39mtoBe([35m200[39m)[33m;[39m[22m
[2m     [90m     |[39m                                  [31m[1m^[22m[2m[39m[22m
[2m     [90m 150 |[39m     })[33m;[39m[22m
[2m     [90m 151 |[39m   })[33m;[39m[22m
[2m     [90m 152 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/lib/__tests__/logger.service.additional.spec.ts[39m[0m[2m:149:34)[22m[2m[22m

[0m[7m[1m[32m PASS [39m[22m[27m[0m [0m[7m[37m logger [39m[27m[0m [2mpackages/logger/src/lib/__tests__/[22m[1mlogger.module.spec.ts[22m ([0m[1m[41m5.556 s[49m[22m[0m)
  LoggerModule
    forRoot
      [32m‚úì[39m [2mshould provide LoggerService (133 ms)[22m
      [32m‚úì[39m [2mshould provide WINSTON_LOGGER (16 ms)[22m
      [32m‚úì[39m [2mshould provide LOGGER_MODULE_OPTIONS (21 ms)[22m
      [32m‚úì[39m [2mshould be global by default (1 ms)[22m
      [32m‚úì[39m [2mshould respect isGlobal: false (2 ms)[22m
      [32m‚úì[39m [2mshould export LoggerService (2 ms)[22m
      [32m‚úì[39m [2mshould export WINSTON_LOGGER[22m
    forRootAsync
      [32m‚úì[39m [2mshould create module with async config (28 ms)[22m
      [32m‚úì[39m [2mshould support Promise in factory (16 ms)[22m
      [32m‚úì[39m [2mshould support dependency injection (8 ms)[22m
      [32m‚úì[39m [2mshould be global by default for async (30 ms)[22m

[1mTest Suites: [22m[1m[31m3 failed[39m[22m, [1m[32m2 passed[39m[22m, 5 total
[1mTests:       [22m[1m[31m5 failed[39m[22m, [1m[32m85 passed[39m[22m, 90 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        [1m[33m7.841 s[39m[22m
[2mRan all test suites[22m[2m.[22m
